<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Blair studio v0.3.0</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Lexend+Deca:wght@300;400;600;700&family=Sora:wght@400;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="./styles.css">
  <script defer src="https://unpkg.com/colorthief/dist/color-thief.umd.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'">

</head>
<body>
  <main class="wrap">
    <header class="topbar">
      <h1 class="title">Card Frame</h1>
      <div class="top-actions">
        <button id="clearAllBtn" class="btn btn-ghost" title="Clear all inputs"><i class="fa-solid fa-broom"></i></button>
        <button id="topbarDownloadBtn" class="btn btn-ghost" title="Download PNG"><i class="fa-solid fa-download"></i></button>
      </div>
    </header>

    <!-- grandma-friendly help panel -->
    <section class="help-panel collapsed" id="helpPanel" aria-live="polite">
      <div class="help-header">
        <strong>Welcome Tutorial</strong>
        <button id="toggleHelpBtn" class="btn btn-ghost small" aria-expanded="false" title="Show / hide instructions"><i class="fa-solid fa-chevron-down"></i></button>
      </div>
      <div class="collapsible-content">
      <div class="help-steps-content">
        <p>Upload your artwork</p>
        <p>Input the Character Name and Series Title (English titles only)</p>
        <p>The card frame color is automatically detected from your image. Select a color that matches to the overall card image.</p>
        <p>If your done, click the "Send to Discord" button and wait for a Card Manager to approve your submission, all submissions are sent to the #community-cards channel!</p>
        <button id="restartTutorialBtn" class="btn small" type="button" style="margin-top: 10px;">
             <i class="fa-solid fa-rotate-left" style="margin-right: 6px;"></i>Start Tutorial
        </button>
      </div>
      <p class="help-tip"><strong>Tip:</strong>We use 2 auto color methods, if you think the color choice looks off, pick a different palette and then repick the dominant color (it will change color), reupload if you want to restore a previous dominant color. (Or use the custom color)</p>
      </div>
    </section>

    <section class="preview" id="previewWrap">
      <canvas id="frameCanvas" width="930" height="416" aria-label="Card frame preview"></canvas>
    </section>

    <section class="controls">
      
      <div class="card-inputs-container">
        <div class="card-input-set" id="card1Controls" data-step="1">
          <h3><span class="step-badge">Step 1</span> Upload Image</h3>
          <div class="input-group">
            <label for="imageUpload1">Upload Image</label>
            <div class="file-row">
              <div class="dropzone-wrapper">
                <div class="dropzone" id="dropzone1" data-target-input="imageUpload1" tabindex="0" role="button" aria-label="Upload image or drop here">
                  <div class="dz-left">
                    <div class="dz-icon" aria-hidden="true"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                    <div class="dz-text">
                      <button class="btn small" type="button" id="dropChooseBtn">Choose file</button>
                      <div class="desc">Drag & drop or <span class="dz-click">click to upload</span></div>
                    </div>
                  </div>
                  <button class="btn btn-ghost clear-btn" data-clear-card="1" title="Clear card 1"><i class="fa-solid fa-trash"></i></button>
                </div>
                <span class="filename" id="filename1" aria-live="polite"></span>
              </div>
              <input type="file" id="imageUpload1" accept="image/*" aria-describedby="colorStatus1" style="display:none;">
            
            </div>
            <div class="card-controls-row">
              <p id="colorStatus1" class="muted small-info" aria-live="polite"></p>
            </div>
          </div>
          <h4><span class="step-badge">Step 2</span> Select Color</h4>
          <div class="palette hidden" id="palette1" aria-label="Color choices"></div>
          <p id="paletteHint1" class="muted small-info">No image uploaded. Default color will be used.</p>
          <div class="input-group top-pad">
            <div class="color-input-wrapper">
              <input type="color" id="customColor1" value="#969696" aria-describedby="colorStatus1">
              <small class="small-info">Pick your own frame color</small>
            </div>
          </div>
          <div class="input-group">
            <input type="checkbox" id="showImage1" checked>
            <label for="showImage1">Show Uploaded Image</label>
            <small class="small-info">Uncheck to show frame only</small>
          </div>
          <h4><span class="step-badge">Step 3</span> Card Text</h4>
          <div class="input-group">
            <label for="charName1">Character Name</label>
            <div class="input-with-clear">
              <input type="text" id="charName1" placeholder="e.g. Hu Tao" value="">
              <button class="clear-input-btn" data-target="charName1" title="Clear Character Name"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="length-warning muted small-info" id="charWarn1" aria-live="polite"></div>
          </div>
          <div class="input-group">
            <label for="seriesTitle1">Series Title</label>
            <div class="input-with-clear">
              <input type="text" id="seriesTitle1" placeholder="e.g. Genshin Impact" value="">
              <button class="clear-input-btn" data-target="seriesTitle1" title="Clear Series Title"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="length-warning muted small-info" id="seriesWarn1" aria-live="polite"></div>
          </div>
          <div class="input-group">
            <label for="printNumber1">Print Number (optional)</label>
            <div class="input-with-clear">
              <input type="text" id="printNumber1" placeholder="e.g. #1" value="">
              <button class="clear-input-btn" data-target="printNumber1" title="Clear Print Number"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <small class="small-info">Print number is <strong>not needed</strong> if you are submitting a card</small>
          </div>

          <div class="form-actions">
            <button id="sendDiscordBtn" class="btn btn-discord" type="button" title="Send card details to Discord">
              <i class="fa-brands fa-discord" style="margin-right:8px;"></i>Send to Discord
            </button>
            <button id="downloadBtn" class="btn" type="button" title="Download PNG">
              <i class="fa-solid fa-download" style="margin-right:8px;"></i>Download PNG
            </button>
          </div>
        </div>

      </div>
    </section>

    <section class="help-panel collapsed" id="resourcesPanel" aria-live="polite">
      <div class="help-header">
        <strong>Cardmaker Resources</strong>
        <button id="toggleResourcesBtn" class="btn btn-ghost small" aria-expanded="false" title="Show / hide resources"><i class="fa-solid fa-chevron-down"></i></button>
      </div>
      <div class="collapsible-content">
      <div class="resource-categories">
        
        <div class="resource-group">
          <h5>Image Upscaling</h5>
          <ul>
            <li><strong>Note:</strong>Check the #cardmakers guide channel on our Discord server on what settings you need to use.</li>
            <li>Our final card image sizes are 725x1040, make sure to upscale an image to a size similar to that, avoid over-upscaling as it produces upscaling artifacts (e.g. unnatural edges, fuzzy random lines, texture distortion especially on the eyes)</li>
            <li><a href="https://www.waifu2x.net/" target="_blank">waifu2x</a></li>
            <li><a href="https://unlimited.waifu2x.net/" target="_blank">unlimited:waifu2x (Takes longer to generate)</a></li>
            <li><a href="https://bigjpg.com" target="_blank">Bigjpg</a></li>
          </ul>
        </div>

        <div class="resource-group">
          <h5>Image Sources</h5>
          <ul>
            <li><strong>Note:</strong>For all image searches, please use the "Official Art" tag too.</li>
            <li><a href="https://danbooru.donmai.us/" target="_blank">Danbooru (Most Popular, Beware NSFW)</a></li>
            <li><a href="https://safebooru.org/" target="_blank">Safebooru (No NSFW)</a></li>
            <li><a href="https://x.com/" target="_blank">X (You can also search for the anime's wiki instead and find the gallery sections)</a></li>
            <li><a href="https://www.zerochan.net/Official+Art" target="_blank">Zerochan</a></li>
            <li><a href="https://mudae.net/" target="_blank">Mudae.net (You need to crop out the white borders)</a></li>
            <li><a href="https://everythingmoe.com/?section=artboard" target="_blank">EverythingMoe (list)</a></li>
          </ul>
        </div>
        
        <div class="resource-group">
          <h5>Reverse Image Search</h5>
          <ul>
            <li><a href="https://images.google.com/" target="_blank">Google Images</a></li>
            <li><a href="https://saucenao.com/" target="_blank">SauceNao</a></li>
            <li><a href="https://copyseeker.net/" target="_blank">Copyseeker</a></li>
            <li><a href="https://image.baidu.com/" target="_blank">Baidu</a></li>
            <li><a href="https://yandex.com/images/" target="_blank">Yandex</a></li>            
          </ul>
        </div>

        <div class="resource-group">
          <h5>Series Checker</h5>
          <ul>
            <li><a href="https://myanimelist.net/" target="_blank">MyAnimeList</a></li>
            <li><a href="https://anilist.co/" target="_blank">Anilist</a></li>
            <li><a href="https://kitsu.io/" target="_blank">Kitsu</a></li>
            <li><a href="https://everythingmoe.com/?section=database" target="_blank">EverythingMoe (list)</a></li>         
          </ul>
        </div>       
      </div>
      </div>
    </section>

    <footer class="meta">
    </footer>
  </main>

  <div id="toast-container"></div>

  <div id="tutorial-overlay" style="display: none;">
    <div id="tutorial-backdrop"></div>
    <div id="tutorial-popover" class="tutorial-popover">
      <div class="popover-content">
        <div id="tutorial-title" class="popover-title"></div>
        <div id="tutorial-body" class="popover-body"></div>
      </div>
      <div class="popover-footer">
        <span id="tutorial-step-indicator" class="step-indicator"></span>
        <div class="popover-actions-group">
          <button id="tutorial-skip-btn" class="btn btn-ghost small">Skip</button>
          <button id="tutorial-prev-btn" class="btn btn-ghost small" style="display: none;">Previous</button>
          <button id="tutorial-next-btn" class="btn small">Next</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
